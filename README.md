# autoDingTalk
基于auto.js的钉钉自动打卡脚本

## install
1. auto.js
https://github.com/SuperMonster003/AutoJs6
安装完成后，开启auto.js软件，在侧边栏中开启以下选项：\
① 无障碍服务; \
② 忽略电池优化; \
③ 显示在其他应用上层;

1. 克隆本仓库
```
git clone https://github.com/goxixi/autoDingTalk.git
``` 
2.安装网易邮箱大师
或者修改相应代码

3. 根据自己手机情况修改autoDingTalk.js脚本 \
当前版本下需要修改根据自身情况修改的部分： \
① 截图功能部分; \
② 手机解锁部分; \
③ 钉钉密码与接收打卡结果邮箱地址 \
④ 修改发送确认邮件使用的邮箱app(若不使用网易邮箱大师)
⑤ 修改延时时间（过大可能导致脚本执行失败。在魔趣rom的小米5上测试，设置两分钟的延时时间，脚本能够正常执行）

4. 设置定时脚本
在安卓端auto.js添加两个脚本，分别设置定时时间为上班时间和下班时间

## log
### 2023.5.8 v1.2
新增：\
在开启钉钉与邮箱app后，分别强制停止两个app，以防止占用内存过大导致auto.js被后台杀死 \
测试模式下，不进行随机延时并且不会发送邮件，主要任务结束后不进行等待 \
修复: 
加长了启动钉钉的等待时间，以减少钉钉启动过慢导致的打卡失败的概率 \
加长了启动邮箱app的等待时间，以减少邮箱app启动过慢导致的邮件发送失败的概率 \

### 2023.5.7 v1.1
新增：\
在每次打卡后，开启airdroid \
修复: \
无法添加随机延时的bug \
注释改为中文

### 2023.5.6 v1.0
新增： \
检测钉钉是否登录，若否则自动登录 \
自动开启钉钉，激活极速打卡 \
脚本启动后，随机延时一段时间再开始打卡任务 \
在钉钉首页截图并发送邮件至指定邮箱


### TODO
减少直接点击像素的语句，以增强适应性与鲁棒性 \
截屏功能使用auto.js API实现 \
读取邮件通知，开启airdroid \
...

## reference
http://wp.fang1688.cn/study/941.html
